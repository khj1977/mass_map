<?php echo '<?xml version="1.0" encoding="UTF-8"?>' ?>
<kml xmlns="http://www.opengis.net/kml/2.2" xmlns:gx="http://www.google.com/kml/ext/2.2" xmlns:kml="http://www.opengis.net/kml/2.2" xmlns:atom="http://www.w3.org/2005/Atom">
<Document>
	<name>mass-media-coverage-map</name>

		<open>1</open>
	
<!-- kmlスタイルここから -->

	<Style id="nhkhighlight">
		<IconStyle>
			<color>99ffffff</color>
			<scale>2.0</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/blue.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>1</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	<StyleMap id="nhk">
		<Pair>
			<key>normal</key>
			<styleUrl>#nhknormal</styleUrl>
		</Pair>
		<Pair>
			<key>highlight</key>
			<styleUrl>#nhkhighlight</styleUrl>
		</Pair>
	</StyleMap>
	<Style id="nhknormal">
		<IconStyle>
			<color>99ffffff</color>
			<scale>1.8</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/blue.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>0</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	
	<Style id="nihontvhighlight">
		<IconStyle>
			<color>99ffffff</color>
			<scale>2.0</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/purple.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>1</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	<StyleMap id="nihontv">
		<Pair>
			<key>normal</key>
			<styleUrl>#nihontvnormal</styleUrl>
		</Pair>
		<Pair>
			<key>highlight</key>
			<styleUrl>#nihontvhighlight</styleUrl>
		</Pair>
	</StyleMap>
	<Style id="nihontvnormal">
		<IconStyle>
			<color>99ffffff</color>
			<scale>1.8</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/purple.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>0</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>

	<Style id="tvasahihighlight">
		<IconStyle>
			<color>99ffffff</color>
			<scale>2.0</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/orange.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>1</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	<StyleMap id="tvasahi">
		<Pair>
			<key>normal</key>
			<styleUrl>#tvasahinormal</styleUrl>
		</Pair>
		<Pair>
			<key>highlight</key>
			<styleUrl>#tvasahihighlight</styleUrl>
		</Pair>
	</StyleMap>
	<Style id="tvasahinormal">
		<IconStyle>
			<color>99ffffff</color>
			<scale>1.8</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/orange.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>0</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	
	<Style id="tbshighlight">
		<IconStyle>
			<color>99ffffff</color>
			<scale>2.0</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/cyan.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>1</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	<StyleMap id="tbs">
		<Pair>
			<key>normal</key>
			<styleUrl>#tbsnormal</styleUrl>
		</Pair>
		<Pair>
			<key>highlight</key>
			<styleUrl>#tbshighlight</styleUrl>
		</Pair>
	</StyleMap>
	<Style id="tbsnormal">
		<IconStyle>
			<color>99ffffff</color>
			<scale>1.8</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/cyan.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>0</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>

	<Style id="fujitvhighlight">
		<IconStyle>
			<color>99ffffff</color>
			<scale>2.0</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/green.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>1</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	<StyleMap id="fujitv">
		<Pair>
			<key>normal</key>
			<styleUrl>#fujitvnormal</styleUrl>
		</Pair>
		<Pair>
			<key>highlight</key>
			<styleUrl>#fujitvhighlight</styleUrl>
		</Pair>
	</StyleMap>
	<Style id="fujitvnormal">
		<IconStyle>
			<color>99ffffff</color>
			<scale>1.8</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/green.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>0</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>

	<Style id="tvtokyohighlight">
		<IconStyle>
			<color>99ffffff</color>
			<scale>2.0</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/yellow.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>1</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	<StyleMap id="tvtokyo">
		<Pair>
			<key>normal</key>
			<styleUrl>#tvtokyonormal</styleUrl>
		</Pair>
		<Pair>
			<key>highlight</key>
			<styleUrl>#tvtokyohighlight</styleUrl>
		</Pair>
	</StyleMap>
	<Style id="tvtokyonormal">
		<IconStyle>
			<color>99ffffff</color>
			<scale>1.8</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/yellow.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>0</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>

	<Style id="asahi_shinbunhighlight">
		<IconStyle>
			<color>99ffffff</color>
			<scale>2.0</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/magenta.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>1</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>
	<StyleMap id="asahi_shinbun">
		<Pair>
			<key>normal</key>
			<styleUrl>#asahi_shinbunnormal</styleUrl>
		</Pair>
		<Pair>
			<key>highlight</key>
			<styleUrl>#asahi_shinbunhighlight</styleUrl>
		</Pair>
	</StyleMap>
	<Style id="asahi_shinbunnormal">
		<IconStyle>
			<color>99ffffff</color>
			<scale>1.8</scale>
			<Icon>
				<href>http://mapping.jp/project311/media_coverage/magenta.png</href>
			</Icon>
			<hotSpot x="0.5" y="0.5" xunits="fraction" yunits="fraction"/>
		</IconStyle>
		<LabelStyle>
			<scale>0</scale>
	</LabelStyle>
		<LineStyle>
			<color>22ffffff</color>
		</LineStyle>
		<ListStyle>
		</ListStyle>
	</Style>

<!-- kmlスタイルここまで -->
<!-- start body -->
	<Folder>
		<name>年月日</name>
		<open>1</open>

<!-- 単一の位置情報の場合　-->
<?php foreach($viewVals as $element) { ?>
  <?php if (count($element["geos"]) == 1) { ?>
		<Folder>
			<name>メディア名と日時</name>
			<open>1</open>
			<Placemark>
				<name><?php echo $element["media_name"]; ?></name>
				<description><![CDATA[<p class="balloon"><?php echo $element["data"]; ?></p>]]></description>
				<Point>
					<extrude>1</extrude>
					<altitudeMode>relativeToGround</altitudeMode>
					<coordinates><?php printf("%s,%s", $element["geos"][0]["geo1"], $element["geos"][0]["geo2"]) ?>,20000</coordinates>
				</Point>
				<TimeSpan>
					<begin><?php echo $element["start_year"]; ?>-<?php echo $element["start_month"]; ?>-<?php echo $element["start_day"]; ?>T<?php echo $element["start_hour"]; ?>:<?php echo $element["start_min"]; ?>:00+09:00</begin>
					<end><?php echo $element["start_year"]; ?>-<?php echo $element["start_month"]; ?>-<?php echo $element["start_day"]; ?>T<?php echo $element["start_hour"]; ?>:<?php echo $element["start_min"]; ?>:00+09:00</end>
　　　　　　　　　　　　　　　　　　　　<!--
　　　　　　　　　　　　　　　　　　　 放映時間はDBにないので，endは1時間後に設定してください　
								-->　　　　
				</TimeSpan>
				<styleUrl><?php echo $element["type_media"]; ?></styleUrl>
				
								<!--
								以下の#以降を各局ごとに指定．たとえば
								
								<styleUrl><?php echo $element["style_media"]; ?></styleUrl>
								
								NHK総合 #nhk
								テレビ朝日　#tvasahi
								日本テレビ #nihontv
								フジテレビ　#fujitv
								TBS #tbs
								テレビ東京　＃tvtokyo
								朝日新聞 #asahi_shinbun
								-->
				
			</Placemark>
		</Folder>

<!-- 複数の位置情報の場合（以下の例は三箇所）-->
<!-- not closed by Folder at l.346 -->
<!-- the following is the case when multiple geo-coded data is included -->
  <?php } else { ?>
  <!-- use the same $element within the following loop but the different -->
  <!-- geo data. -->
  <?php foreach($element["geos"] as $geo) { ?>
		<Folder>
			<name>メディア名と日時</name>
			<open>1</open>
			<Placemark>
				<name><?php echo $element["media_name"]; ?></name>
				<description><![CDATA[<p class="balloon"><?php echo $element["data"]; ?></p>]]></description>
				<Point>
					<extrude>1</extrude>
					<altitudeMode>relativeToGround</altitudeMode>
					<coordinates><?php printf("%s,%s", $geo["geo1"], $geo["geo2"]) ?>,20000</coordinates>
				</Point>
				<TimeSpan>
                                  <begin><?php echo $element["start_year"]; ?>-<?php echo $element["start_month"]; ?>-<?php echo $element["start_day"]; ?>T<?php echo $element["start_hour"]; ?>:<?php echo $element["start_min"]; ?>:00+09:00</begin>
					<end><?php echo $element["start_year"]; ?>-<?php echo $element["start_month"]; ?>-<?php echo $element["start_day"]; ?>T<?php echo $element["start_hour"]; ?>:<?php echo $element["start_min"]; ?>:00+09:00</end>
　　　　　　　　　　　　　　　　　　　　<!--
　　　　　　　　　　　　　　　　　　　 放映時間はDBにないので，endは1時間後に設定してください　
								-->
　　　　　　　　　　　　　　　　　　　　</TimeSpan>
　　　　　　　　　　　　　　　　　　　　<styleUrl><?php echo $element["type_media"]; ?></styleUrl>
				
									<!--
									
								以下の#以降を各局ごとに指定．たとえば
								
								<styleUrl><?php echo $element["style_media"]; ?></styleUrl>
									
								NHK総合 #nhk
								テレビ朝日　#tvasahi
								日本テレビ #nihontv
								フジテレビ　#fujitv
								TBS #tbs
								テレビ東京　＃tvtokyo
								朝日新聞 #asahi_shinbun
								-->
			</Placemark>

			
		</Folder>
<!-- end of one place for multiple places -->

  <?php } ?>
  <?php } ?>
  <?php } ?>
	</Folder>
</Document>
</kml>

